<?xml version="1.0" encoding="utf-8"?>
<configure 
    xmlns="http://namespaces.zope.org/zope"
    xmlns:browser="http://namespaces.zope.org/browser"
    xmlns:zcml="http://namespaces.zope.org/zcml"
    >

    <adapter
        factory=".info.DeviceInfo"
        for=".Device.Device"
        provides=".interfaces.IDeviceInfo"
        />

    <adapter
        factory=".info.TeamInterfaceInfo"
        for=".TeamInterface.TeamInterface"
        provides=".interfaces.ITeamInterfaceInfo"
        />

    <adapter
        factory=".info.InterfaceInfo"
        for=".Interface.Interface"
        provides=".interfaces.IInterfaceInfo"
        />

    <adapter
        factory=".info.CPUInfo"
        for=".CPU.CPU"
        provides=".interfaces.ICPUInfo"
        />

    <adapter
        factory=".info.FileSystemInfo"
        for=".FileSystem.FileSystem"
        provides=".interfaces.IFileSystemInfo"
        />

    <adapter
        factory=".info.ClusterDeviceInfo"
        for=".ClusterDevice.ClusterDevice"
        provides=".interfaces.IClusterDeviceInfo"
        />

    <adapter
        factory=".info.ClusterServiceInfo"
        for=".ClusterService.ClusterService"
        provides=".interfaces.IClusterServiceInfo"
        />

    <adapter
        factory=".info.ClusterResourceInfo"
        for=".ClusterResource.ClusterResource"
        provides=".interfaces.IClusterResourceInfo"
        />

    <adapter
        factory=".info.WinServiceInfo"
        for=".WinService.WinService"
        provides=".interfaces.IWinServiceInfo"
        />

    <adapter
        factory=".info.ClusterNodeInfo"
        for=".ClusterNode.ClusterNode"
        provides=".interfaces.IClusterNodeInfo"
        />

    <adapter
        factory=".info.ClusterDiskInfo"
        for=".ClusterDisk.ClusterDisk"
        provides=".interfaces.IClusterDiskInfo"
        />

    <adapter
        factory=".info.ClusterNetworkInfo"
        for=".ClusterNetwork.ClusterNetwork"
        provides=".interfaces.IClusterNetworkInfo"
        />

    <adapter
        factory=".info.ClusterInterfaceInfo"
        for=".ClusterInterface.ClusterInterface"
        provides=".interfaces.IClusterInterfaceInfo"
        />

    <adapter
        factory=".info.WinIISInfo"
        for=".WinIIS.WinIIS"
        provides=".interfaces.IWinIISInfo"
        />

    <adapter
        factory=".info.WinSQLBackupInfo"
        for=".WinSQLBackup.WinSQLBackup"
        provides=".interfaces.IWinSQLBackupInfo"
        />

    <adapter
        factory=".info.WinSQLDatabaseInfo"
        for=".WinSQLDatabase.WinSQLDatabase"
        provides=".interfaces.IWinSQLDatabaseInfo"
        />

    <adapter
        factory=".info.WinSQLInstanceInfo"
        for=".WinSQLInstance.WinSQLInstance"
        provides=".interfaces.IWinSQLInstanceInfo"
        />

    <adapter
        factory=".info.WinSQLJobInfo"
        for=".WinSQLJob.WinSQLJob"
        provides=".interfaces.IWinSQLJobInfo"
        />


	<!-- datasources -->
    <adapter
        provides=".datasources.ShellDataSource.IShellDataSourceInfo"
        for=".datasources.ShellDataSource.ShellDataSource"
        factory=".datasources.ShellDataSource.ShellDataSourceInfo"
        />

    <adapter
        provides=".datasources.PerfmonDataSource.IPerfmonDataSourceInfo"
        for=".datasources.PerfmonDataSource.PerfmonDataSource"
        factory=".datasources.PerfmonDataSource.PerfmonDataSourceInfo"
        />

    <adapter
        provides=".datasources.PortCheckDataSource.IPortCheckDataSourceInfo"
        for=".datasources.PortCheckDataSource.PortCheckDataSource"
        factory=".datasources.PortCheckDataSource.PortCheckDataSourceInfo"
        />

    <adapter
        provides=".datasources.EventLogDataSource.IEventLogInfo"
        for=".datasources.EventLogDataSource.EventLogDataSource"
        factory=".datasources.EventLogDataSource.EventLogInfo"
        />

    <adapter
        provides=".datasources.ServiceDataSource.IServiceDataSourceInfo"
        for=".datasources.ServiceDataSource.ServiceDataSource"
        factory=".datasources.ServiceDataSource.ServiceDataSourceInfo"
        />

    <adapter
        provides=".datasources.WinRMPingDataSource.IWinRMPingDataSourceInfo"
        for=".datasources.WinRMPingDataSource.WinRMPingDataSource"
        factory=".datasources.WinRMPingDataSource.WinRMPingDataSourceInfo"
        />

    <adapter
        provides=".datasources.IISSiteDataSource.IIISSiteDataSourceInfo"
        for=".datasources.IISSiteDataSource.IISSiteDataSource"
        factory=".datasources.IISSiteDataSource.IISSiteDataSourceInfo"
        />

    <adapter
        provides=".datasources.ProcessDataSource.IProcessDataSourceInfo"
        for=".datasources.ProcessDataSource.ProcessDataSource"
        factory=".datasources.ProcessDataSource.ProcessDataSourceInfo"
        />

    <adapter
        provides="Products.Zuul.catalog.interfaces.IIndexableWrapper"
        for=".TeamInterface.TeamInterface"
        factory=".global_catalog.TeamInterfaceWrapper"
        />

    <adapter
        provides="Products.Zuul.catalog.interfaces.IIndexableWrapper"
        for=".Interface.Interface"
        factory=".global_catalog.InterfaceWrapper"
        />


    <!-- Custom Actions -->
    <utility
        name="wincommand"
        provides="Products.ZenModel.interfaces.IAction"
        factory=".actions.WinCommandAction"
        />

    <adapter
        provides=".actions.IWinCommandActionContentInfo"
        for="Products.ZenModel.NotificationSubscription.NotificationSubscription"
        factory=".actions.WinCommandActionContentInfo"
        />


    <!-- Custom Path Reporters -->
    <adapter factory=".catalog.paths.InterfacePathReporter"
        for=".Interface.Interface"
        provides="Products.Zuul.catalog.interfaces.IPathReporter"
        />


    <!-- Device Links -->
    <configure zcml:condition="have zenoss:IExpandedLinkProvider">
        <subscriber
            provides='Products.ZenModel.interfaces.IExpandedLinkProvider'
            for='ZenPacks.zenoss.Microsoft.Windows.Device.Device'
            factory='.Device.DeviceLinkProvider'
            />
    </configure>

    <!-- Impact -->
    <configure zcml:condition="installed ZenPacks.zenoss.Impact">
        <include package="ZenPacks.zenoss.Impact" file="meta.zcml"/>

        <subscriber
            provides="ZenPacks.zenoss.Impact.impactd.interfaces.IRelationshipDataProvider"
            for=".Device.Device"
            factory=".impact.DeviceRelationsProvider"
            />

        <subscriber
            provides="ZenPacks.zenoss.Impact.impactd.interfaces.IRelationshipDataProvider"
            for=".FileSystem.FileSystem"
            factory=".impact.FileSystemRelationsProvider"
            />

        <subscriber
            provides="ZenPacks.zenoss.Impact.impactd.interfaces.IRelationshipDataProvider"
            for=".CPU.CPU"
            factory=".impact.CPURelationsProvider"
            />

        <subscriber
            provides="ZenPacks.zenoss.Impact.impactd.interfaces.IRelationshipDataProvider"
            for=".ClusterService.ClusterService"
            factory=".impact.ClusterRelationsProvider"
            />

        <subscriber
            provides="ZenPacks.zenoss.Impact.impactd.interfaces.IRelationshipDataProvider"
            for=".WinService.WinService"
            factory=".impact.WinServiceRelationsProvider"
            />

        <subscriber
            provides="ZenPacks.zenoss.Impact.impactd.interfaces.IRelationshipDataProvider"
            for=".WinIIS.WinIIS"
            factory=".impact.WinIISRelationsProvider"
            />

        <subscriber
            provides="ZenPacks.zenoss.Impact.impactd.interfaces.IRelationshipDataProvider"
            for=".WinSQLJob.WinSQLJob"
            factory=".impact.WinSQLJobRelationsProvider"
            />

        <subscriber
            provides="ZenPacks.zenoss.Impact.impactd.interfaces.IRelationshipDataProvider"
            for=".WinSQLDatabase.WinSQLDatabase"
            factory=".impact.WinSQLDatabaseRelationsProvider"
            />

        <subscriber
            provides="ZenPacks.zenoss.Impact.impactd.interfaces.IRelationshipDataProvider"
            for=".WinSQLJob.WinSQLJob"
            factory=".impact.WinSQLJobRelationsProvider"
            />

        <subscriber
            provides="ZenPacks.zenoss.Impact.impactd.interfaces.IRelationshipDataProvider"
            for=".ClusterResource.ClusterResource"
            factory=".impact.ClusterResourceRelationsProvider"
            />

        <subscriber
            provides="ZenPacks.zenoss.Impact.impactd.interfaces.IRelationshipDataProvider"
            for=".ClusterNode.ClusterNode"
            factory=".impact.ClusterNodeRelationsProvider"
            />

        <subscriber
            provides="ZenPacks.zenoss.Impact.impactd.interfaces.IRelationshipDataProvider"
            for=".ClusterNetwork.ClusterNetwork"
            factory=".impact.ClusterNetworkRelationsProvider"
            />

        <subscriber
            provides="ZenPacks.zenoss.Impact.impactd.interfaces.IRelationshipDataProvider"
            for=".ClusterDisk.ClusterDisk"
            factory=".impact.ClusterDiskRelationsProvider"
            />

        <subscriber
            provides="ZenPacks.zenoss.Impact.impactd.interfaces.IRelationshipDataProvider"
            for=".ClusterInterface.ClusterInterface"
            factory=".impact.ClusterInterfaceRelationsProvider"
            />

    </configure>

    <!-- Analytics -->
    <include file="reportable.zcml"
        xmlns:zcml="http://namespaces.zope.org/zcml"
        zcml:condition="installed ZenPacks.zenoss.ZenETL" />

    <!-- Browser -->
    <include package=".browser"/>

</configure>
